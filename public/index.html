<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>NeonTokyo</title>

  <!-- Farcaster Mini App -->
  <meta name="fc:miniapp" content="{&quot;version&quot;:&quot;1&quot;,&quot;imageUrl&quot;:&quot;https://neon-tokyo.vercel.app/assets/embed-3x2.png&quot;,&quot;button&quot;:{&quot;title&quot;:&quot;Start Focus&quot;,&quot;action&quot;:{&quot;type&quot;:&quot;launch_frame&quot;,&quot;url&quot;:&quot;https://neon-tokyo.vercel.app/&quot;}},&quot;splashImageUrl&quot;:&quot;https://neon-tokyo.vercel.app/assets/splash.png&quot;,&quot;splashBackgroundColor&quot;:&quot;#020617&quot;,&quot;name&quot;:&quot;NeonTokyo&quot;}" />
  <!-- Backwards compatible Frame -->
  <meta name="fc:frame" content="vNext" />
  <meta name="fc:frame:image" content="https://neon-tokyo.vercel.app/assets/embed-3x2.png" />
  <meta name="fc:frame:button:1" content="Start Focus" />
  <meta name="fc:frame:button:1:action" content="launch_frame" />
  <meta name="fc:frame:button:1:target" content="https://neon-tokyo.vercel.app/" />

  <!-- Open Graph -->
  <meta property="og:title" content="NeonTokyo" />
  <meta property="og:description" content="Start a neon focus session: cockpit HUD, glitchy blockers, and tactile Pomodoro flows built for makers." />
  <meta property="og:image" content="https://neon-tokyo.vercel.app/assets/hero.png" />
  <meta property="og:url" content="https://neon-tokyo.vercel.app/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <style>
    :root{
      --bg:#05040a;
      --panel: rgba(10,10,18,.78);
      --panel2: rgba(10,10,18,.55);
      --stroke: rgba(255,255,255,.10);
      --pink:#FF00FF;
      --cyan:#00FFFF;
      --purple:#7c3aed;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --radius: 18px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(255,0,255,.18), transparent 55%),
        radial-gradient(1100px 700px at 85% 20%, rgba(0,255,255,.14), transparent 60%),
        radial-gradient(900px 500px at 60% 120%, rgba(124,58,237,.18), transparent 65%),
        linear-gradient(180deg, #05040a, #04030a 60%, #05040a);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      display:flex;
      justify-content:center;
    }
    #app{
      width:min(980px, 100%);
      padding: max(12px, env(safe-area-inset-top)) 12px max(14px, env(safe-area-inset-bottom));
    }
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 10px 6px 12px;
    }
    .brand{ display:flex; align-items:center; gap:10px; }
    .logo{
      width:42px; height:42px; border-radius: 14px;
      background:
        radial-gradient(circle at 35% 30%, rgba(255,0,255,.85), rgba(255,0,255,.15) 55%, transparent 60%),
        radial-gradient(circle at 70% 70%, rgba(0,255,255,.85), rgba(0,255,255,.12) 55%, transparent 60%),
        linear-gradient(145deg, rgba(10,10,18,.8), rgba(2,2,6,.9));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 45px rgba(0,0,0,.55), 0 0 0 1px rgba(255,0,255,.08) inset;
      position:relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-30%;
      background: repeating-linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.08) 2px, transparent 2px, transparent 10px);
      transform: rotate(12deg);
      opacity:.22;
      mix-blend-mode: screen;
    }
    .name{ font-weight: 750; letter-spacing:.08em; text-transform: uppercase; font-size: 14px; }
    .sub{ font-size: 12px; color: var(--muted); margin-top:2px; }
    .env{
      font-size:12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.85);
      user-select:none;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items:start;
    }
    @media (max-width: 860px){
      .grid{ grid-template-columns: 1fr; }
    }

    .panel{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(10,10,18,.86), rgba(10,10,18,.62));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 220px at 18% 0%, rgba(255,0,255,.14), transparent 60%),
        radial-gradient(900px 260px at 80% 0%, rgba(0,255,255,.12), transparent 60%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 8px);
      pointer-events:none;
      opacity:.35;
    }
    .panelInner{ padding: 14px; position:relative; }

    .kicker{
      font-size: 12px;
      letter-spacing:.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,.70);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .kicker .glowDot{
      width:10px; height:10px; border-radius:999px;
      background: rgba(0,255,255,.8);
      box-shadow: 0 0 14px rgba(0,255,255,.55);
    }

    .timer{
      margin-top: 12px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 12px;
    }
    .time{
      font-variant-numeric: tabular-nums;
      font-size: 44px;
      font-weight: 800;
      letter-spacing:.03em;
      text-shadow: 0 0 18px rgba(0,255,255,.12);
    }
    .mode{ font-size: 12px; color: rgba(255,255,255,.62); padding-bottom: 8px; text-align:right; }

    .row{ display:flex; gap:10px; margin-top: 12px; }
    .btn{
      flex:1;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      padding: 12px 12px;
      font-size: 14px;
      cursor:pointer;
      transition: transform .06s ease, filter .12s ease, box-shadow .12s ease;
      user-select:none;
      position:relative;
      overflow:hidden;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(255,0,255,.72), rgba(124,58,237,.70));
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 18px 40px rgba(0,0,0,.35), 0 0 0 1px rgba(255,0,255,.18) inset;
    }
    .btn.cyan{
      background: linear-gradient(180deg, rgba(0,255,255,.28), rgba(255,255,255,.06));
      box-shadow: 0 0 0 1px rgba(0,255,255,.18) inset;
    }
    .btn.wide{ width:100%; margin-top: 12px; }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }

    .inputs{ margin-top: 12px; display:grid; gap:10px; }
    .input{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.88);
      padding: 12px 12px;
      outline:none;
      font-size: 14px;
    }
    .input:focus{
      box-shadow: 0 0 0 3px rgba(0,255,255,.18);
      border-color: rgba(0,255,255,.28);
    }
    .pillRow{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    .pill{
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      padding: 8px 10px;
      color: rgba(255,255,255,.80);
      font-size: 12px;
      cursor:pointer;
      user-select:none;
    }
    .pill.on{
      background: rgba(0,255,255,.14);
      border-color: rgba(0,255,255,.28);
      box-shadow: 0 0 18px rgba(0,255,255,.12);
    }

    .hud{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      padding: 12px;
      position:relative;
      overflow:hidden;
    }
    .hud::before{
      content:"";
      position:absolute; inset:-20%;
      background: radial-gradient(circle at 30% 30%, rgba(0,255,255,.15), transparent 55%),
                  radial-gradient(circle at 80% 70%, rgba(255,0,255,.14), transparent 60%);
      filter: blur(10px);
      opacity:.8;
      pointer-events:none;
    }
    .hudInner{ position:relative; display:flex; flex-direction:column; gap:8px; }
    .hudLine{ display:flex; justify-content:space-between; gap:10px; font-size: 12px; color: rgba(255,255,255,.82); }
    .hudLine span{ color: rgba(255,255,255,.62); }

    .mantra{
      margin-top: 10px;
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      padding: 10px 12px;
      font-size: 13px;
      color: rgba(255,255,255,.86);
    }

    .overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.82);
      opacity: 0;
      transform: translateY(-12px);
      transition: opacity .18s ease, transform .18s ease;
      z-index: 80;
      pointer-events:none;
    }
    .overlay.on{
      opacity: 1;
      transform: translateY(0);
      pointer-events:auto;
    }
    .overlayHUD{
      position:absolute; left:50%; top: 18px;
      transform: translateX(-50%);
      width: min(920px, calc(100vw - 18px));
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(10,10,18,.72);
      box-shadow: 0 40px 140px rgba(0,0,0,.8);
      overflow:hidden;
    }
    .overlayHUD::before{
      content:"";
      position:absolute; inset:0;
      background: repeating-linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 9px);
      opacity:.25;
      pointer-events:none;
    }
    .overlayInner{ position:relative; padding: 14px; }
    .overlayTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      font-size: 12px; color: rgba(255,255,255,.80);
      letter-spacing:.12em; text-transform: uppercase;
    }
    .overlayMsg{
      margin-top: 10px;
      font-size: 28px;
      font-weight: 850;
      letter-spacing:.02em;
      text-shadow: 0 0 22px rgba(255,0,255,.12);
      position:relative;
    }
    .overlayMsg::before, .overlayMsg::after{
      content: attr(data-text);
      position:absolute; left:0; top:0; width:100%;
      opacity:.55;
      mix-blend-mode: screen;
      pointer-events:none;
    }
    .overlayMsg::before{
      transform: translate(2px, -1px);
      color: rgba(0,255,255,.85);
      clip-path: inset(0 0 55% 0);
      animation: g1 1.6s infinite linear;
    }
    .overlayMsg::after{
      transform: translate(-2px, 1px);
      color: rgba(255,0,255,.85);
      clip-path: inset(55% 0 0 0);
      animation: g2 1.3s infinite linear;
    }
    @keyframes g1{ 0%{clip-path: inset(0 0 55% 0);} 50%{clip-path: inset(10% 0 40% 0);} 100%{clip-path: inset(0 0 55% 0);} }
    @keyframes g2{ 0%{clip-path: inset(55% 0 0 0);} 50%{clip-path: inset(62% 0 0 0);} 100%{clip-path: inset(55% 0 0 0);} }

    .backdrop{ position: fixed; inset:0; background: rgba(0,0,0,.62); opacity:0; transition: opacity .16s ease; z-index: 90; }
    .backdrop.show{ opacity:1; }
    .sheetmodal{
      position: fixed; left:50%;
      transform: translateX(-50%) translateY(24px);
      bottom: 10px;
      width: min(520px, calc(100vw - 16px));
      background: linear-gradient(180deg, rgba(10,10,18,.92), rgba(10,10,18,.72));
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 22px;
      box-shadow: 0 50px 160px rgba(0,0,0,.85);
      z-index: 95;
      opacity: 0;
      transition: transform .18s ease, opacity .18s ease;
      overflow:hidden;
    }
    .sheetmodal.show{ opacity:1; transform: translateX(-50%) translateY(0); }
    .sheetgrab{ width: 64px; height: 5px; border-radius: 999px; background: rgba(255,255,255,.18); margin: 10px auto 6px; }
    .sheetcontent{ padding: 8px 14px 14px; position:relative; }
    .sheettitle{ font-size: 16px; font-weight: 750; }
    .sheetdesc{ font-size: 12px; color: rgba(255,255,255,.62); margin-top:4px; }
    .presetgrid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top: 12px; }
    .chip{
      border-radius: 999px; border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      padding: 10px 10px;
      cursor:pointer; font-size: 13px; user-select:none;
    }
    .chip.on{
      background: rgba(255,0,255,.26);
      border-color: rgba(255,0,255,.38);
      box-shadow: 0 0 26px rgba(255,0,255,.14);
    }
    .toast{
      margin-top: 10px; font-size: 12px; color: rgba(255,255,255,.92);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .toast.pop{ animation: pop .22s ease; }
    @keyframes pop{ 0%{ transform: translateY(6px); opacity:.1;} 100%{ transform: translateY(0); opacity:1; } }

    .sheetmodal.preflight .sheetcontent::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 35% 30%, rgba(0,255,255,.25), transparent 55%),
        radial-gradient(circle at 70% 70%, rgba(255,0,255,.22), transparent 60%);
      filter: blur(18px);
      opacity:0;
      animation: pre 1.25s ease forwards;
      pointer-events:none;
    }
    @keyframes pre{
      0%{ opacity: 0; transform: scale(.85); }
      45%{ opacity: .9; transform: scale(1); }
      100%{ opacity: 0; transform: scale(1.08); }
    }
  </style>

</head>
<body>
  <div id="app">
    <header class="top">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="name">NeonTokyo</div>
          <div class="sub">Mech-cockpit deep work HUD</div>
        </div>
      </div>
      <div class="env" id="envPill">Detecting…</div>
    </header>

    <main class="grid">
      <section class="panel">
        <div class="panelInner">
          <div class="kicker">
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="glowDot" aria-hidden="true"></div>
              <div>Focus reactor</div>
            </div>
            <div id="phaseLabel">IDLE</div>
          </div>

          <div class="timer">
            <div class="time" id="timeText">25:00</div>
            <div class="mode">
              <div><span style="color:rgba(255,255,255,.70)">Mode:</span> <b id="modeText">Focus</b></div>
              <div style="margin-top:4px;"><span style="color:rgba(255,255,255,.70)">Sessions:</span> <b id="sessionCount">0</b></div>
            </div>
          </div>

          <div class="row">
            <button class="btn primary" id="startBtn">Start</button>
            <button class="btn cyan" id="pauseBtn">Pause</button>
            <button class="btn" id="resetBtn">Reset</button>
          </div>

          <div class="inputs">
            <input class="input" id="focusMin" inputmode="numeric" placeholder="Focus minutes (default 25)" />
            <input class="input" id="breakMin" inputmode="numeric" placeholder="Break minutes (default 5)" />
          </div>

          <div class="hud">
            <div class="hudInner">
              <div class="hudLine"><b>HUD</b> <span>cockpit status</span></div>
              <div class="hudLine"><div>Blocked sites</div><div id="blockedCount">0</div></div>
              <div class="hudLine"><div>Attempted opens</div><div id="blockedHits">0</div></div>
              <div class="hudLine"><div>Overlay</div><div id="overlayState">OFF</div></div>
            </div>
          </div>

          <div class="mantra" id="mantraBox">HUD online. Distractions: null.</div>
          <button class="btn wide" id="shuffleBtn">Shuffle system message</button>
        </div>
      </section>

      <aside class="panel">
        <div class="panelInner">
          <div class="kicker">
            <div>Blocklist simulator</div>
            <button class="btn" style="flex:0 0 auto; padding:8px 10px; border-radius: 12px;" id="tipBtn">Tip</button>
          </div>

          <div style="margin-top:12px; font-size:12px; color:rgba(255,255,255,.68);">
            This Mini App can’t intercept navigation like an extension—so we simulate the “System Failure” experience.
          </div>

          <div class="pillRow" id="pillRow">
            <div class="pill" data-site="twitter.com">twitter.com</div>
            <div class="pill" data-site="youtube.com">youtube.com</div>
            <div class="pill" data-site="reddit.com">reddit.com</div>
            <div class="pill" data-site="tiktok.com">tiktok.com</div>
            <div class="pill" data-site="news.ycombinator.com">news.yc</div>
            <div class="pill" data-site="instagram.com">instagram.com</div>
          </div>

          <input class="input" id="testUrl" style="margin-top:12px;" inputmode="url" placeholder="Test a URL (e.g. https://twitter.com)" />
          <button class="btn wide primary" id="tryOpenBtn">Try open</button>

          <div style="margin-top:12px; font-size:12px; color:rgba(255,255,255,.65);">
            During focus, blocked attempts trigger a cockpit overlay + glitch warning.
          </div>
        </div>
      </aside>
    </main>

    <footer style="margin-top:12px; text-align:center; font-size:11px; color:rgba(255,255,255,.55);">
      Stored locally. Built for mobile-first Farcaster Mini Apps.
    </footer>
  </div>

  <div class="overlay" id="overlay">
    <div class="overlayHUD">
      <div class="overlayInner">
        <div class="overlayTop">
          <div>SYSTEM FAILURE</div>
          <div id="overlayCloseHint">Tap anywhere to dismiss</div>
        </div>
        <div class="overlayMsg" id="overlayMsg" data-text="DISTRACTION BLOCKED">DISTRACTION BLOCKED</div>
        <div style="margin-top:10px; font-size:12px; color:rgba(255,255,255,.65);">
          Return to cockpit. Keep the interval intact.
        </div>
      </div>
    </div>
  </div>

  <div class="backdrop" id="tipBackdrop" hidden></div>
  <div class="sheetmodal" id="tipSheet" hidden role="dialog" aria-modal="true" aria-label="Send a tip">
    <div class="sheetgrab" aria-hidden="true"></div>
    <div class="sheetcontent">
      <div class="sheettitle">Send a tip (USDC on Base)</div>
      <div class="sheetdesc">Fuel the reactor. Presets are USD-equivalent.</div>

      <div class="presetgrid" id="presetGrid">
        <button class="chip" data-amt="1">$1</button>
        <button class="chip" data-amt="5">$5</button>
        <button class="chip" data-amt="10">$10</button>
        <button class="chip" data-amt="25">$25</button>
      </div>

      <div class="row">
        <input id="customAmt" class="input" placeholder="Custom amount (e.g. 3.50)" inputmode="decimal" />
      </div>

      <button id="sendTipBtn" class="btn primary wide">Send USDC</button>
      <button id="closeTipBtn" class="btn wide">Close</button>

      <div class="toast" id="toast" hidden></div>
    </div>
  </div>

  <script type="module" src="./script.js"></script>
</body>
</html>
